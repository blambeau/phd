\chapter{Conclusion\label{chapter:conclusion}}

Models play a significant role for elaborating requirements and exploring designs of software systems. They help abstracting from multiple details in order to focus on key system aspects. This abstraction process naturally leads capturing complex systems through multiple models. Each of them focusses on particular facets of the system along its intentional, structural, operational and behavioral dimensions.

Building high-quality models for software system is not an easy task. To play a significant role, models should adequately represent the essence of the target system; they should be complete enough to capture all its pertinent facets; high-quality models should be precise when taken in isolation; they should also be consistent with each other. 

This thesis investigated model synthesis as a promising approach for building high-quality models meeting these requirements. Model synthesis were articulated along two main axes in the thesis:
\begin{description}
\item[Vertical synthesis] To capture the operational semantics of high-level models by deriving lower-level ones. This kind of synthesis makes high-level models amenable to formal analysis.

Along this axis, the thesis defined an operational semantics for guarded high-level Message Sequence Charts (guarded hMSC), a process modeling language used for capturing critical processes involving decisions \cite{Damas:2011}. This semantics is operationalized through guarded labeled transition systems (g-LTS); synthesis algorithms were described to derive guarded hMSC as g-LTS, and to derive the latter as pure event-based LTS. The implementation of a model-checker for guarded hMSCs were also described; it adapts a compositional LTS technique borrowed from \cite{Giannakopoulou:2003}.

\item[Horizontal synthesis] To produce missing model fragments in multi-view descriptions, or complete existing models. Horizontal synthesis uses the rules of consistency between the models to produce or complete model fragments from the system knowledge available in other views.

Along this axis, the thesis showed how grammar induction methods can be used to synthesize state machines from scenarios illustrating examples and counterexamples of desired system behavior. Our technique interacts with an end-user who accepts or rejects additional scenarios generated by the synthesizer. It operates in a golden triangle between scenarios, state machines and declarative goals; the latter indeed prove an effective way of constraining the induction process so as to avoid undesired system behaviors. The induction process may be pruned with various other sources of system knowledge, resulting in a faster process, a reduced number of user interactions and a strong consistency of the synthesized state machines with such knowledge.
\end{description}

Model synthesis techniques considered in the thesis aim at supporting the incremental building of system models and, thereby, the exploration of requirements and system designs. Vertical and horizontal synthesis actually reach those objectives in different but complementary ways.
\begin{itemize}

\item Vertical synthesis aims at triggering model analysis which, in turn, proves being a very effective way for systematic model building.

Model analysis helps detecting errors and inconsistencies in models of the target system. Fixing these flaws naturally helps increasing model adequacy, completeness and consistency. Such systematic application supports reasoning about the target system, the identification of missing requirements, etc.

The operational semantics of guarded hMSCs paves the way of such a systematic construction of process models through model analysis. The thesis indeed contributes a model checking procedure for our process models. In addition, it triggers the availability of a various set of analyses contributed in~\cite{Damas:2011}. 

The potential benefits of such an model building approach is illustrated with the Gisele pathway analyzer, described in Section~\ref{section:tool-clinical-pathway-analyzer}. The latter is a prototype for applying analysis-driven process modeling. This tool has been successfully used for modeling critical care processes.

\item Horizontal synthesis aims at achieving similar objectives for high-quality modeling, but in a constructive way.

Our inductive synthesis technique of state machines from scenarios provides a flexible and effective support for model building of this sort. Requiring only a few scenarios in the first place, it also supports structured forms of scenarios in input. In addition to synthesizing consistent state machines, it triggers the identification of state variables and goals as well as the interactive completion of the initial scenario specification with additional examples and counterexamples of system behavior.

Our approach is supported by the ISIS tool, described in Section~\ref{section:tool-support-isis}. Its effectiveness has been assessed in various evaluations, both on case studies and on synthetic datasets.

\end{itemize}

As illustrated in the thesis, specific analysis and synthesis techniques already prove effective for model building when taken in isolation. However, their true potential appears when different techniques are made available in integrated environment.

This has been observed when using the ISIS tool on case studies. In addition to the inductive synthesis of state machines from scenarios, the tool provides the inference of goals from scenarios, the decoration of synthesized state machines with state invariants, and various consistency checks. A similar effect can be observed in the Gisele toolset, which integrates various analyses on our process models.

To sum up, our experience with these tools showed that more than the powerfulness of specific techniques, it is their conjoint use that makes incremental multi-view model building really effective. In addition to specific issues of the thesis techniques themselves, improving such integrated environments raises important questions and opens numerous perspectives. The following sections summarizes the most important ones.

\subsection*{Incremental multi-view modeling}

For incremental model building to converge towards the desired system, one has to consider that the latter actually exists, at least theoretically. This is arguable, since the system is unknown. During modeling, different alternatives are explored; some design decisions are rejected whereas others are committed.

In practice, this means that system modeling is a highly non linear, trial and error process. Model refactoring techniques seem therefore at least as important as synthesis and analysis ones. The availability of all of them in integrated environments would help supporting a more effective exploration and design process. 

For example, the modeling bottleneck in the ISIS tool is the lack of support for scenario refactoring. This prevent some design explorations and even hurts modeling when such refactoring is required, due to the presence of negative implied scenarios for example. In contrast, if such refactoring was formally supported, state machine synthesis would provide the necessary time-saver toolset to rebuild state machines from refactored scenarios. Investigating the intertwined usage of refactoring, synthesis and analysis techniques thus opens interesting perspectives for additional support.

This raises the question of what forms an effective user guidance in environment integrating multiple techniques. As discussed in Chapter~\ref{chapter:tool-support}, the ISIS and Gisele tools differ in the way such guidance is implemented. In the former case, available techniques and analyses are made contextually available and executed on demand. In the latter case, analyses run in background and real-time feedback is available when navigating a process model. Both approaches have been shown to have advantages and drawbacks.

\subsection*{Convergence and scalability}

Our choice of grammar induction for incremental state machine synthesis is partly motivated because of the convergence criterion it provides towards adequate models of the target system (see Section~\ref{section:inductive-discussion}). The soundness of such theoretical convergence has been argued useful as well when one considers the synthesis of behavior models from both scenarios and goals (see Section~\ref{related-for-requirements-2}). As already discussed, work remains to be done to root the ASM$^*$ algorithm in such a sound theoretical framework.

Even if convergence guarantees are provided, QSM raises an issue about the number of scenarios submitted for classification by the end-user. As illustrated in experiments, additional system knowledge such as fluents and goals helps reducing the number of questions to be rejected. However, the number of accepted scenarios does not similarly reduce. This leads to a scalability problem for using interactive synthesis on large systems.

One way to tackle this problem is to explore new ways for interacting with the user. The latter could for example request to terminate the induction process early. Visual inspection of generated state machines would yield a form of equivalence queries. Otherwise, one can investigate ways of mitigating the lack of user control by domain knowledge injection or automating the oracle (see e.g., \cite{Walkinshaw:2007}).

\subsection*{Lack of knowledge and classification errors}

A difficulty with incremental system modeling is related to the lack of system knowledge. When using the interactive feature of QSM for example, the user might be faced with a scenario question for which she does not have a clear classification answer. In such situation, ``don't know'' answers are worth investigating as they provide a better guidance than yes/no answers for incremental modeling. Another approach would allow the end-user to classify some scenario questions as to be answered later.

A open question related to the one above is the robustness to possible misclassification of scenarios questions by the end-user. Traditional ways of dealing with noisy inputs include probabilistic learning methods. Such methods could be adapted in our context, especially in presence of multiple stakeholders.

Multi-view modeling actually provides another way of dealing with classification errors. For example, domain knowledge and goals help detecting and/or correcting such mistakes. Indeed, misclassification typically leads to failing consistency checks if domain properties and goals are available. Those failures can be effectively fixed provided they are detected soon enough. Once again, a better integration of model analysis and model synthesis techniques might prove very useful here.

\subsection*{Implied scenarios}

The potential nuisance of implied scenarios has been introduced in Section~\ref{section:inductive-correctness}. Implied scenarios occur when a distributed system is designed globally while implemented component wise. In our framework, problematic implied scenarios are system behaviors correctly rejected by the synthesized system LTS, as required by a goal for instance, but exhibited by the composed system.

Existing techniques from~\cite{Uchitel:2004} could be adapted to our framework for detecting implied scenarios and submitting additional scenario questions to the end-user (see Section~\ref{section:related-for-analysis-3}). Even with the availability of such a detection technique, implied scenarios raise important open issues.
\begin{itemize}
\item The presence of negative implied scenarios requires refactoring of the system decomposition and agent interfaces. The most important issue with implied scenarios must be found in the lack of scenario refactoring techniques to eliminate them rather than in their presence \emph{per se}.
\item Another important problem occurs when the acceptance or rejection of an implied scenario is actually unknown. This is related to the lack of knowledge already discussed. Eliminating rejected implied scenarios requires costly refactoring, but what needs to be done is rather clear. Implied scenarios whose issue is unclear stay potentially harmful until their fate is decided.
\item Last, the late discovery of harmful implied scenarios may be partly due to inadequate use of the multi-view modeling framework, and thereby to weaknesses in the later itself. For example, our definition of negative scenario, borrowed from \cite{Uchitel:2002} should probably be revisited. Indeed, such scenarios define negative system traces only; in particular, they do not define a negative trace in the state machine of the agent that sends the proscribed event, which is very arguable. Similarly, goals are considered system-wide. Considering only goals that are realizable by at least one agent is often sufficient to avoid related implied scenario problems in the first place.
\end{itemize}

\input{src/9-conclusion/1-contributions}
